import{l as K,m as V,n as z,o as G,p as H}from"./chunk-ANZK24LV.js";import{l as N,n as O}from"./chunk-3NSREKK3.js";import{Ab as I,Bb as d,Cb as L,Eb as $,Ib as p,Lb as k,Mb as x,Sa as l,a as m,b as c,bb as P,db as E,ea as u,hb as g,ia as w,ib as T,j as A,ja as S,jb as F,ka as D,kb as M,lb as R,ob as a,pb as s,qb as b,rb as W,xb as q,yb as v,zb as j}from"./chunk-PKKRECOV.js";var f=[...Array(25e3).keys()],J={name:"for vs. each",loop:1e4,scenarios:[{name:"for",method:re},{name:"forEach",method:ie},{name:"forOf",method:ae}]};function ie(){let e=0;f.forEach(t=>e+=t)}function re(){let e=0;for(let t=0;t<f.length;t++)e+=f[t]}function ae(){let e=0;for(let t of f)e+=t}var C=[...Array(2e3).keys()].map(e=>({id:e,value:Math.floor(Math.random()*100)})),se=(e,t)=>(e??[]).reduce((n,o)=>c(m({},n),{[t?o[t]:o]:o}),{});function le(e,t){return(e??[]).reduce((n,o)=>(n[o[t]]=o,n),{})}var Q={name:"keyByTest",loop:2,scenarios:[{name:"lodash",method:me},{name:"bad native",method:ce},{name:"native",method:ue}]};function me(){K(C,e=>e.id)}function ce(){se(C,"id")}function ue(){le(C,"id")}var _=[...Array(2500).keys()],B=[...Array(75).keys()],U={name:"lodash pullAll vs. plain ts",loop:1e3,scenarios:[{name:"lodash pullAllWith",method:de},{name:"pull with find & inlcudes",method:pe},{name:"pull with find & some",method:fe}]};function de(){let e=[..._];z(e,B,(t,n)=>t===n)}function pe(){_.filter(e=>!B.includes(e))}function fe(){_.filter(e=>!B.some(t=>e===t))}var X=[...Array(2500).keys()],Y={name:"reduce lodash vs. pure",loop:1e4,scenarios:[{name:"lodash",method:he},{name:"pure",method:ye}]};function he(){G(X,(e,t)=>t,0)}function ye(){X.reduce((e,t)=>t,0)}var Z=[...Array(2500).keys()],ee={name:"some vs. find",loop:1e4,scenarios:[{name:"some",method:ge},{name:"!!find",method:Te}]};function ge(){Z.some(e=>e===2e3)}function Te(){Z.find(e=>e===2e3)}var h=[...Array(25e4).keys()],te={name:"duplicate array",loop:1e3,scenarios:[{name:"spread",method:be},{name:"concat",method:ve},{name:"slice",method:ke},{name:"for",method:xe}]};function be(){[...h]}function ve(){[].concat(h)}function ke(){h.slice()}function xe(){let e=[];for(let t of h)e.push(t)}var ne=[...Array(25e3).keys()].map(e=>({id:e,value:Math.floor(Math.random()*100)})),y={name:"unique",loop:1e3,scenarios:[{name:"unique",method:Ce},{name:"set",method:_e}]};function Ce(){H(ne.map(e=>e.value))}function _e(){[...new Set(ne.map(e=>e.value))]}var Ae=["*"],oe=(()=>{class e{static \u0275fac=function(o){return new(o||e)};static \u0275cmp=u({type:e,selectors:[["app-button"]],standalone:!0,features:[p],ngContentSelectors:Ae,decls:2,vars:0,consts:[["type","button",1,"btn-primary","transition","duration-300","ease-in-out","focus:outline-none","focus:shadow-outline","bg-blue-500","hover:bg-blue-800","text-white","font-normal","py-2","px-4","mr-1","rounded"]],template:function(o,r){o&1&&(j(),a(0,"button",0),I(1),s())},encapsulation:2,changeDetection:0})}return e})();function we(e,t){e&1&&(a(0,"div",5),b(1,"div",6),s())}function Se(e,t){if(e&1&&(a(0,"div",7)(1,"span",8),d(2),k(3,"number"),s(),a(4,"div",9),b(5,"div",10),s()()),e&2){let n=t.$implicit;l(2),$("",n.name," - ",x(3,7,n.time),"ms"),l(3),E("width",n.percentage,"%"),P("aria-valuenow",n.percentage)("aria-valuemin",0)("aria-valuemax",100)}}function De(e,t){if(e&1){let n=W();a(0,"div",1),g(1,we,2,0,"div",2),a(2,"h3"),d(3),s(),M(4,Se,6,9,"div",11,F),a(6,"div",3)(7,"app-button",4),q("click",function(){S(n);let r=v();return D(r.runTest())}),d(8,"Test starten"),s()()()}if(e&2){let n=v();l(1),T(1,n.animating?1:-1),l(2),L(t.name),l(1),R(t.results)}}var Pe={duplicateArrayTest:te,forTest:J,keyByTest:Q,pullWithAllTest:U,reduceTest:Y,someTest:ee,uniqueTest:y},ot=(()=>{class e{block;animating=!1;test=y;testResult$=new A(void 0);ngOnChanges(){this.test=Pe[this.block.body?.value??""]??y,this.testResult$.next(this.getResults())}runTest(){this.animating=!0,setTimeout(()=>{this.testResult$.next(this.getResults(!0)),this.animating=!1},16)}getResults(n=!1){let o=this.test.scenarios.map(i=>c(m({},i),{time:n?this.runScenario(i):0})),r=V(o,i=>i.time)?.time??0;return o.forEach(i=>{i.time===null||i.time===void 0||(i.percentage=Math.floor(i.time/r*100))}),c(m({},this.test),{loop:this.test.loop??1e3,results:o})}runScenario(n){let o=new Date().getTime();for(let r=0;r<(this.test.loop??1e3);r++)n.method();return new Date().getTime()-o}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=u({type:e,selectors:[["app-performance-block"]],inputs:{block:"block"},standalone:!0,features:[w,p],decls:2,vars:3,consts:[["class","shadow-md rounded-lg p-4 mt-4 border-2 relative"],[1,"shadow-md","rounded-lg","p-4","mt-4","border-2","relative"],["class","absolute rounded-lg top-0 bottom-0 left-0 right-0 flex justify-center items-center bg-blue-400 bg-opacity-50"],[1,"pt-2","text-right"],[3,"click"],[1,"absolute","rounded-lg","top-0","bottom-0","left-0","right-0","flex","justify-center","items-center","bg-blue-400","bg-opacity-50"],[1,"w-12","h-12","border-4","border-blue-800","rounded-full","animate-loader",2,"border-right-color","transparent"],[1,"pt-2"],[1,"text-sm"],[1,"mt-2","bg-gray-200","dark:bg-black","rounded-full","overflow-hidden"],["role","progressbar",1,"bg-blue-200","h-4"],["class","pt-2"]],template:function(o,r){if(o&1&&(g(0,De,9,2,"div",0),k(1,"async")),o&2){let i;T(0,(i=x(1,1,r.testResult$))?0:-1,i)}},dependencies:[oe,N,O],encapsulation:2,changeDetection:0})}return e})();export{ot as PerformanceBlockComponent};
